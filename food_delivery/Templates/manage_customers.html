{% extends 'base.html' %}
{% block title %}Manage Customers{% endblock %}

{% block content %}
<div class="container py-5">
  <h2 class="mb-4 text-center text-primary fw-bold">ðŸ‘¥ Manage Customers</h2>

  <!-- Success/Error Messages -->
  {% if messages %}
  <div class="mb-3">
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
      {{ message }}
      <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
    {% endfor %}
  </div>
  {% endif %}

  {% if customers %}
  <div class="card shadow-sm border-0 rounded-4">
    <div class="card-body">
      <table class="table table-hover align-middle mb-0">
        <thead class="table-primary text-center">
          <tr>
            <th scope="col">#</th>
            <th scope="col">Username</th>
            <th scope="col">Email</th>
            <th scope="col">Phone</th>
            <th scope="col">Date Joined</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody class="text-center">
          {% for customer in customers %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ customer.username }}</td>
            <td>{{ customer.email }}</td>
            <td>
              {% if customer.phone_number and customer.phone_number != "0000000000" %}
                {{ customer.phone_number }}
              {% else %}
                -
              {% endif %}
            </td>

            <td>{{ customer.date_joined|date:"M d, Y" }}</td>
            <td>
              <a href="{% url 'view_customer' customer.id %}" class="btn btn-sm btn-info text-white">
                <i class="bi bi-eye"></i> View
              </a>

            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  {% else %}
  <div class="alert alert-warning text-center mt-4">
    <i class="bi bi-exclamation-triangle"></i> No customers found.
  </div>
  {% endif %}
</div>
{% endblock %}
