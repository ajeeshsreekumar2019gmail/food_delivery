{% extends "base.html" %}
{% load static %}

{% block title %}Payment{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/payment.css' %}">

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-6">

            <div class="payment-card">
                
                <div class="payment-header">
                    <h4>Complete Your Payment</h4>
                </div>

                <div class="mt-4 text-center">
                    <p class="payment-amount">
                        You are about to pay:
                        <br>
                        â‚¹ {{ razorpay_amount|floatformat:2 }}
                    </p>
                </div>

                <div class="divider"></div>

                <button id="rzp-button" class="pay-btn">
                    Pay Now
                </button>

            </div>

        </div>
    </div>
</div>

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
    var options = {
        "key": "{{ razorpay_merchant_key }}",
        "amount": "{{ razorpay_amount }}",
        "currency": "{{ currency }}",
        "name": "Food Delivery",
        "description": "Order Payment",
        "order_id": "{{ razorpay_order_id }}",
        "handler": function (response) {
            window.location.href = "/{{ callback_url }}?razorpay_payment_id="
                + response.razorpay_payment_id
                + "&razorpay_order_id=" + response.razorpay_order_id
                + "&razorpay_signature=" + response.razorpay_signature;
        },
        "theme": {
            "color": "#0d6efd"
        }
    };

    var rzp = new Razorpay(options);
    document.getElementById('rzp-button').onclick = function(e) {
        rzp.open();
        e.preventDefault();
    };
</script>

{% endblock %}
